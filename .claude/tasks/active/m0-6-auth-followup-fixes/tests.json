{
  "task_id": "m0-6-auth-followup-fixes",
  "test_framework": "none_established",
  "verification_strategy": "typecheck_and_build",
  "tests": [
    {
      "id": "T1",
      "wave": 1,
      "type": "manual",
      "description": "Sign-up flow completes without redirect loop -- user lands on correct portal dashboard after creating account and organization",
      "status": "pending",
      "verification_command": null,
      "expected_behavior": "After sign-up with hospital org type: user lands on /hospital/dashboard. After sign-up with provider org type: user lands on /provider/dashboard."
    },
    {
      "id": "T2",
      "wave": 2,
      "type": "manual",
      "description": "Hospital user cannot access /provider/* routes -- middleware redirects to /hospital/dashboard",
      "status": "pending",
      "verification_command": null,
      "expected_behavior": "Hospital org user navigating to /provider/dashboard gets redirected to /hospital/dashboard. Provider org user navigating to /hospital/dashboard gets redirected to /provider/dashboard."
    },
    {
      "id": "T3",
      "wave": 2,
      "type": "manual",
      "description": "Root path / redirects authenticated users to their correct portal dashboard",
      "status": "pending",
      "verification_command": null,
      "expected_behavior": "Hospital user hitting / goes to /hospital/dashboard. Provider user hitting / goes to /provider/dashboard."
    },
    {
      "id": "T4",
      "wave": 3,
      "type": "manual",
      "description": "Sign-in respects returnTo query parameter for post-auth redirect",
      "status": "pending",
      "verification_command": null,
      "expected_behavior": "Unauthenticated user hitting /provider/analytics is redirected to /sign-in?returnTo=/provider/analytics. After sign-in, user lands on /provider/analytics (not /hospital/dashboard)."
    },
    {
      "id": "T5",
      "wave": 5,
      "type": "automated",
      "description": "TypeScript compilation succeeds across all workspaces",
      "status": "pending",
      "verification_command": "pnpm typecheck",
      "expected_behavior": "Zero type errors across all workspace packages."
    },
    {
      "id": "T6",
      "wave": 5,
      "type": "automated",
      "description": "Production build succeeds (no SSR/CSR boundary issues)",
      "status": "pending",
      "verification_command": "pnpm build",
      "expected_behavior": "All apps and packages build successfully. No Edge runtime errors in middleware. No 'use client' boundary warnings."
    }
  ]
}
