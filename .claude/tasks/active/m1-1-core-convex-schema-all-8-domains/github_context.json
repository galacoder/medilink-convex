{
  "issue_number": 52,
  "title": "M1-1: Core Convex Schema â€” All 8 MIGRATE Plugin Domains",
  "state": "OPEN",
  "url": "https://github.com/galacoder/medilink-convex/issues/52",
  "labels": ["priority:critical", "milestone:M1", "area:schema"],
  "milestone": "M1: Core Schema & Auth",
  "user_stories": [
    "As a platform_admin and hospital_admin, I want a comprehensive Convex database schema covering all 8 MIGRATE plugin domains so that all features across the platform have a consistent, multi-tenant data foundation"
  ],
  "acceptance_criteria": [
    "convex/schema.ts defines all tables for 8 plugin domains: equipment, service-requests, qr-code, providers, consumables, consumer-mgmt, disputes, audit-log",
    "All tables include organizationId field (multi-tenancy)",
    "All tables have appropriate indexes (by_org, by_status, by_date, etc.)",
    "Enums use v.union(v.literal(...)) pattern (Convex standard)",
    "TypeScript types exported for UI consumption",
    "Schema deploys cleanly to Convex (npx convex deploy)",
    "Total table count: ~25 tables (down from 35+ Drizzle tables)"
  ],
  "files_to_create_modify": [
    {"file": "convex/schema.ts", "action": "Modify", "purpose": "Add all 8 domain tables, indexes, and enum definitions"},
    {"file": "packages/validators/src/equipment.ts", "action": "Create", "purpose": "Zod schemas for equipment domain validation"},
    {"file": "packages/validators/src/serviceRequests.ts", "action": "Create", "purpose": "Zod schemas for service request domain"},
    {"file": "packages/validators/src/providers.ts", "action": "Create", "purpose": "Zod schemas for provider domain"},
    {"file": "packages/validators/src/consumables.ts", "action": "Create", "purpose": "Zod schemas for consumables domain"},
    {"file": "packages/validators/src/disputes.ts", "action": "Create", "purpose": "Zod schemas for disputes domain"}
  ],
  "technical_approach": "Reference legacy Drizzle schemas, consolidate 35+ tables into ~25 Convex tables, every table gets organizationId index, use Convex v.id() for foreign keys, convert Drizzle enums to v.union(v.literal(...))",
  "dependencies": {
    "depends_on": "M0-2 (base schema with organizations, users, userOrganizations tables)",
    "blocks": ["M1-4 (equipment functions)", "M1-5 (service request functions)", "M1-6 (provider functions)", "M1-7 (seed data)"]
  },
  "has_structured_requirements": true,
  "effort": {"story_points": 8, "t_shirt": "L"}
}
